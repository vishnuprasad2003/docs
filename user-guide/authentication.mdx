---
title: "Authentication & Security"
description: "Understanding authentication, security features, and session management"
---

## Authentication System Overview

The Intain Markets platform uses a multi-layered authentication system that combines traditional credentials with blockchain technology and IPFS storage to ensure secure access and data integrity.

## Authentication Architecture

### **Multi-Layer Security**
1. **Traditional Authentication**: Email/password credentials
2. **Blockchain Verification**: User data stored on immutable blockchain
3. **IPFS Storage**: Decentralized user profile storage
4. **JWT Tokens**: Secure session management
5. **Role-Based Access**: Granular permission system

## Login Process

### **Step 1: Credential Submission**

```http
POST /api/auth/login
Content-Type: application/json

{
  "EmailId": "user@company.com",
  "Password": "EncryptedPassword",
  "Role": "Issuer"
}
```

### **Step 2: Validation Process**

1. **Input Validation**
   - Email format verification
   - Password encryption validation
   - Role verification

2. **Blockchain Lookup**
   - User data retrieved from blockchain contract
   - Status verification (Active/Inactive)
   - Role confirmation

3. **IPFS Data Retrieval**
   - User profile data fetched from IPFS
   - Organization information loaded
   - Preferences and settings applied

### **Step 3: Authentication Response**

```json
{
  "statuscode": 200,
  "isSuccess": true,
  "message": "User Authentication Successful",
  "result": {
    "UserId": "USER-12345",
    "EmailAddress": "user@company.com",
    "FirstName": "John",
    "LastName": "Doe",
    "UserRole": "Issuer",
    "OrganizationId": "ORG-67890",
    "OrganizationName": "ABC Corporation",
    "logo": "/uploads/USER-12345.png"
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

## JWT Token Structure

### **Token Payload**
```json
{
  "exp": 1640995200,
  "EmailId": "user@company.com",
  "Role": "Issuer",
  "userId": "USER-12345",
  "organizationId": "ORG-67890"
}
```

### **Token Features**
- **Expiration**: 1 hour from creation
- **Secure Signing**: HMAC SHA256 algorithm
- **Stateless**: No server-side session storage
- **Role-Based**: Contains user role information

## Security Features

### **Password Security**
- **AES Encryption**: Passwords encrypted before transmission
- **Strong Requirements**: Minimum 8 characters with complexity
- **Secure Storage**: Encrypted storage in IPFS
- **No Plain Text**: Passwords never stored in plain text

### **Data Protection**
- **Blockchain Immutability**: User data cannot be tampered with
- **IPFS Decentralization**: Distributed storage prevents single points of failure
- **Encryption in Transit**: HTTPS/TLS for all communications
- **Secure Headers**: Security headers prevent common attacks

### **Session Management**
- **JWT Expiration**: Automatic token expiration
- **Secure Cookies**: HttpOnly and Secure flags
- **CSRF Protection**: Cross-site request forgery prevention
- **XSS Protection**: Cross-site scripting prevention

## Role-Based Access Control

### **Role Hierarchy**
```
Admin
├── Facility Agent (Underwriter)
├── Issuer (Borrower)
├── Lender (Investor)
└── Servicer
```

### **Permission Matrix**

| Feature | Issuer | Facility Agent | Lender | Servicer |
|---------|--------|----------------|--------|----------|
| Create Term Sheet | ✅ | ❌ | ❌ | ❌ |
| Review Term Sheet | ❌ | ✅ | ❌ | ❌ |
| Create Master Commitment | ❌ | ✅ | ❌ | ❌ |
| Approve Master Commitment | ❌ | ❌ | ✅ | ❌ |
| Create Funding Request | ✅ | ❌ | ❌ | ❌ |
| Approve Funding Request | ❌ | ✅ | ❌ | ❌ |
| Upload Loan Tapes | ❌ | ❌ | ❌ | ✅ |
| View Reports | ✅ | ✅ | ✅ | ✅ |

## API Authentication

### **Required Headers**
```http
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
Content-Type: application/json
User-Agent: CF-Platform-Client/1.0
```

### **Authentication Middleware**
All API endpoints are protected by authentication middleware that:
- Validates JWT tokens
- Checks token expiration
- Verifies user permissions
- Logs authentication attempts

## Security Best Practices

### **For Users**
1. **Strong Passwords**: Use complex, unique passwords
2. **Secure Networks**: Avoid public Wi-Fi for sensitive operations
3. **Regular Updates**: Keep browsers and devices updated
4. **Logout**: Always logout when finished
5. **Monitor Activity**: Review account activity regularly

### **For Developers**
1. **Token Validation**: Always validate JWT tokens
2. **Role Checking**: Verify user permissions before operations
3. **Input Sanitization**: Sanitize all user inputs
4. **Error Handling**: Don't expose sensitive information in errors
5. **Logging**: Log security events for monitoring

## Troubleshooting Authentication

### **Common Issues**

#### **Invalid Credentials**
```
Error: "Please enter Valid Credentials"
```
**Solutions:**
- Verify email address and password
- Check for typos in credentials
- Ensure correct role is selected
- Try password reset if needed

#### **Account Not Found**
```
Error: "Please enter Valid EmailID"
```
**Solutions:**
- Verify email address is correct
- Check if account is activated
- Ensure account exists in system
- Contact support for assistance

#### **Token Expired**
```
Error: "Token has expired"
```
**Solutions:**
- Login again to get new token
- Implement token refresh logic
- Handle expiration gracefully
- Update client-side token management

#### **Insufficient Permissions**
```
Error: "Access denied"
```
**Solutions:**
- Verify user role has required permissions
- Check if role assignment is correct
- Contact administrator for role updates
- Review permission requirements

## Security Monitoring

### **Audit Logging**
- All authentication attempts are logged
- Failed login attempts are tracked
- Token usage is monitored
- Security events are recorded

### **Anomaly Detection**
- Unusual login patterns detected
- Multiple failed attempts flagged
- Geographic anomalies identified
- Device fingerprinting used

## API Security Endpoints

### **Login Endpoint**
```http
POST /api/auth/login
```

### **Token Validation**
```http
GET /api/auth/validate
Authorization: Bearer <token>
```

### **User Profile**
```http
GET /api/auth/profile
Authorization: Bearer <token>
```

### **Logout**
```http
POST /api/auth/logout
Authorization: Bearer <token>
```

## Next Steps

<Card title="User Registration" icon="user-plus" href="/user-guide/registration">
  Learn how to register for a new account
</Card>

<Card title="Credit Facility Overview" icon="diagram-project" href="/user-guide/credit-facility/overview">
  Understand the complete workflow after authentication
</Card>

<Card title="API Documentation" icon="code" href="/api-reference/auth/authentication">
  Explore authentication API endpoints
</Card>
