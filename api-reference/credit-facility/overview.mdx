---
title: "Credit Facility API Overview"
description: "Complete API reference for the credit facility module with endpoints and examples"
---

## API Overview

The Credit Facility API provides comprehensive endpoints for managing the entire credit facility lifecycle, from term sheet creation to funding notice execution. The API follows RESTful principles and uses JSON for data exchange.

## Base URL

```
https://api.intainmarkets.com/cf/
```

## Authentication

All API endpoints require authentication using JWT tokens:

```http
Authorization: Bearer <your-jwt-token>
Content-Type: application/json
```

## API Structure

The Credit Facility API is organized into the following modules:

### **Term Sheet APIs (10 endpoints)**
- Create, read, update term sheets
- DocuSign integration
- Document management
- Auto-save functionality

### **Master Commitment APIs (6 endpoints)**
- Master commitment configuration
- Lender group management
- Collateral rules setup
- Status management

### **Funding Request APIs (9 endpoints)**
- Funding request creation and management
- Facility agent approval workflow
- Collateral documentation
- Auto-save functionality

### **Funding Notice APIs (5 endpoints)**
- Funding notice management
- FT token creation and distribution
- Lender fund transfer confirmations
- Status tracking

### **Facility Overview APIs (5 endpoints)**
- Dashboard data for different user roles
- Summary statistics
- Status overviews

### **Loan Mapping APIs (1 endpoint)**
- Map loans to credit facilities
- Eligibility validation

## Response Format

All APIs return responses in a standardized format:

### **Success Response**
```json
{
  "statuscode": 200,
  "isSuccess": true,
  "module": "creditFacility",
  "message": "Operation completed successfully",
  "result": {
    // Response data
  }
}
```

### **Error Response**
```json
{
  "statuscode": 400,
  "isSuccess": false,
  "message": "Detailed error description",
  "errors": [
    {
      "field": "fieldName",
      "message": "Field-specific error message"
    }
  ]
}
```

## Status Codes

| Code | Description |
|------|-------------|
| 200 | Success |
| 201 | Created |
| 400 | Bad Request (validation errors) |
| 401 | Unauthorized |
| 403 | Forbidden |
| 404 | Resource not found |
| 500 | Internal server error |

## Rate Limiting

- **Rate Limit**: 1000 requests per hour per API key
- **Burst Limit**: 100 requests per minute
- **Headers**: Rate limit information included in response headers

## Error Handling

### **Validation Errors**
```json
{
  "statuscode": 400,
  "isSuccess": false,
  "message": "Validation failed",
  "errors": [
    {
      "field": "requestedCommitmentAmount",
      "message": "Amount must be greater than 0"
    }
  ]
}
```

### **Business Logic Errors**
```json
{
  "statuscode": 400,
  "isSuccess": false,
  "message": "Master commitment must be ACTIVE to create funding request"
}
```

### **Authentication Errors**
```json
{
  "statuscode": 401,
  "isSuccess": false,
  "message": "Invalid or expired token"
}
```

## Data Models

### **Term Sheet Model**
```json
{
  "termSheetId": "TS-20241201-1701234567-abc123",
  "termSheetName": "ABC Credit Facility Term Sheet",
  "issuerOrgName": "ABC Corporation",
  "requestedCommitmentAmount": 50000000,
  "advanceRate": 85.0,
  "pricingIndex": "SOFR",
  "margin": 2.5,
  "maturityDate": "2025-12-31T00:00:00Z",
  "fixedRate": 5.5,
  "covenantTemplate": "Standard Commercial",
  "drawFrequency": "Monthly",
  "marketMakerOrgId": "MM-ORG-67890",
  "issuerId": "ISSUER-001",
  "issuerOrgId": "ORG-12345",
  "status": "Draft",
  "module": "creditFacility",
  "createdAt": "2024-12-01T10:00:00Z",
  "updatedAt": "2024-12-01T10:00:00Z"
}
```

### **Master Commitment Model**
```json
{
  "masterCommitmentId": "MC-20241201-1701234567-def456",
  "termSheetId": "TS-20241201-1701234567-abc123",
  "facilityType": "Revolving Credit",
  "advanceRate": 85.0,
  "margin": 2.5,
  "pricingIndex": "SOFR 1M",
  "maturityDate": "2025-12-01T00:00:00Z",
  "drawFrequency": "Monthly",
  "covenantTemplate": "Standard",
  "marketMakerOrgId": "MM-ORG-67890",
  "issuerOrgId": "ORG-12345",
  "payingAgentOrgId": "PA-ORG-12345",
  "totalCommitmentAmount": 50000000,
  "collateralRules": [...],
  "lenderGroups": [...],
  "status": "Draft",
  "module": "creditFacility",
  "createdAt": "2024-12-01T10:00:00Z",
  "updatedAt": "2024-12-01T10:00:00Z"
}
```

### **Funding Request Model**
```json
{
  "fundingRequestId": "FR-20241201-1701234567-ghi789",
  "masterCommitmentId": "MC-20241201-1701234567-def456",
  "issuerOrgId": "ORG-12345",
  "marketMakerOrgId": "MM-ORG-67890",
  "requestedAmount": 10000000,
  "purpose": "Working capital",
  "collateralDescription": "Residential mortgage loans",
  "status": "DRAFT",
  "module": "creditFacility",
  "createdAt": "2024-12-01T10:00:00Z",
  "updatedAt": "2024-12-01T10:00:00Z"
}
```

### **Funding Notice Model**
```json
{
  "fundingNoticeId": "FN-20241201-1701234567-mno345",
  "fundingRequestId": "FR-20241201-1701234567-ghi789",
  "masterCommitmentId": "MC-20241201-1701234567-def456",
  "facilityName": "ABC Credit Facility",
  "requestAmount": 10000000,
  "issuerOrgId": "ORG-12345",
  "marketMakerOrgId": "MM-ORG-67890",
  "fundingDate": "2024-12-01T00:00:00Z",
  "ftContractAddress": "0x1234567890abcdef...",
  "tokenDistribution": [...],
  "status": "PENDING_ESIGN",
  "module": "creditFacility",
  "createdAt": "2024-12-01T10:00:00Z",
  "updatedAt": "2024-12-01T10:00:00Z"
}
```

## DocuSign Integration

### **DocuSign Endpoints**
- **Term Sheet Signing**: `/docusign/term-sheet-sign`
- **Master Commitment Signing**: `/docusign/master-commitment-sign`
- **Funding Notice Signing**: `/docusign/funding-notice-sign`
- **Signing Complete**: `/docusign/signing-complete`

### **DocuSign Workflow**
1. **Create Envelope**: System creates DocuSign envelope
2. **Generate URL**: Signing URL generated for user
3. **User Signs**: User completes signing process
4. **Callback**: System receives signing completion callback
5. **Status Update**: Document status updated automatically

## IPFS Integration

### **Document Storage**
- **Upload**: Documents uploaded to IPFS
- **Hash**: IPFS hash returned for reference
- **Retrieval**: Documents retrieved using IPFS hash
- **Verification**: Cryptographic hash verification

### **IPFS Endpoints**
- **Upload Document**: `/ipfs/upload`
- **Retrieve Document**: `/ipfs/retrieve/:hash`
- **Verify Document**: `/ipfs/verify/:hash`

## Webhooks

### **Webhook Events**
- **Status Changes**: Notifications for status updates
- **DocuSign Complete**: Signing completion notifications
- **Funding Events**: Funding-related event notifications
- **Error Events**: Error and exception notifications

### **Webhook Configuration**
```json
{
  "url": "https://your-domain.com/webhooks",
  "events": ["status_change", "docusign_complete", "funding_event"],
  "secret": "your-webhook-secret"
}
```

## SDKs and Libraries

### **JavaScript SDK**
```javascript
import { CreditFacilityAPI } from '@intainmarkets/cf-sdk';

const api = new CreditFacilityAPI({
  apiKey: 'your-api-key',
  baseUrl: 'https://api.intainmarkets.com'
});

// Create term sheet
const termSheet = await api.termSheets.create({
  termSheetName: 'ABC Credit Facility',
  requestedCommitmentAmount: 50000000,
  // ... other fields
});
```

### **Python SDK**
```python
from intainmarkets import CreditFacilityAPI

api = CreditFacilityAPI(
    api_key='your-api-key',
    base_url='https://api.intainmarkets.com'
)

# Create term sheet
term_sheet = api.term_sheets.create({
    'termSheetName': 'ABC Credit Facility',
    'requestedCommitmentAmount': 50000000,
    # ... other fields
})
```

## Testing

### **Sandbox Environment**
- **Base URL**: `https://sandbox-api.intainmarkets.com/cf/`
- **Test Data**: Pre-populated test data available
- **Mock Responses**: Simulated responses for testing
- **Rate Limits**: Higher rate limits for testing

### **Test Credentials**
```json
{
  "apiKey": "test-api-key",
  "userId": "test-user-123",
  "organizationId": "test-org-456"
}
```

## Support

### **Documentation**
- **API Reference**: Complete endpoint documentation
- **Code Examples**: Sample code for all endpoints
- **Integration Guides**: Step-by-step integration guides
- **Best Practices**: Recommended implementation patterns

### **Support Channels**
- **Email**: api-support@intainmarkets.com
- **Chat**: Live chat support available
- **Phone**: +1-555-0123 (Business hours)
- **Community**: Developer community forum

## Next Steps

<Card title="Term Sheet APIs" icon="file-contract" href="/api-reference/credit-facility/term-sheet-apis">
  Explore term sheet API endpoints
</Card>

<Card title="Master Commitment APIs" icon="handshake" href="/api-reference/credit-facility/master-commitment-apis">
  Learn about master commitment APIs
</Card>

<Card title="Funding Request APIs" icon="money-bill-wave" href="/api-reference/credit-facility/funding-request-apis">
  Understand funding request APIs
</Card>

<Card title="Funding Notice APIs" icon="coins" href="/api-reference/credit-facility/funding-notice-apis">
  Explore funding notice APIs
</Card>
